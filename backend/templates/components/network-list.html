{{define "components/network-list.html"}}
<!-- Add Network Button -->
<div class="mb-4 d-flex justify-content-between align-items-center">
    <div>
        <p class="text-muted mb-0">Manage network ranges for reconnaissance scanning</p>
    </div>
    <button class="btn btn-success" 
            onclick="showNetworkModal('/api/network-modal')">
        <i class="bi bi-plus-circle me-2"></i>Add New Network
    </button>
</div>

<!-- Networks Table -->
<div class="table-responsive">
    <table class="table table-dark table-hover table-sm" id="networksTable">
        <thead>
            <tr>
                <th>Network Name</th>
                <th>CIDR</th>
                <th>Status</th>
                <th>Last Scanned</th>
                <th>Devices Found</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {{range .Networks}}
            <tr class="network-row {{if and $.ScanState.SelectedNetwork (eq .ID $.ScanState.SelectedNetwork.ID)}}selected-network{{end}}"
                hx-post="/api/scan/select-network"
                hx-vals='{"network-id": "{{.ID}}"}'
                hx-trigger="click"
                hx-swap="none"
                data-network-id="{{.ID}}">
                <td class="text-success">{{or .Name "Unnamed Network"}}</td>
                <td class="text-success">{{.CIDR}}</td>
                <td>
                    {{if eq .Status "active"}}
                        <span class="status-online">Active</span>
                    {{else if eq .Status "scanning"}}
                        <span class="status-idle">Scanning</span>
                    {{else}}
                        <span class="status-offline">Inactive</span>
                    {{end}}
                </td>
                <td class="text-success">
                    {{if .LastScannedAt}}
                        {{formatTimeAgo .LastScannedAt}}
                    {{else}}
                        <span class="text-muted">Never</span>
                    {{end}}
                </td>
                <td class="text-success">{{.DeviceCount}}</td>
                <td>
                    <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-success btn-sm" 
                                onclick="event.stopPropagation(); showNetworkModal('/api/network-modal/{{.ID}}')"
                                title="Edit Network">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-outline-danger btn-sm" 
                                hx-delete="/api/networks/{{.ID}}" 
                                hx-confirm="Are you sure you want to delete this network?"
                                hx-target="closest tr"
                                hx-swap="outerHTML"
                                onclick="event.stopPropagation()"
                                title="Delete Network">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            {{else}}
            <tr>
                <td colspan="6" class="text-center text-muted py-4">
                    <i class="bi bi-diagram-3 me-2" style="font-size: 1.5rem;"></i>
                    <br>
                    No networks configured yet. Add your first network to start scanning.
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>


<style>
/* Custom hover effect with green border instead of gray background */
#networksTable {
    border-collapse: separate;
    border-spacing: 0 2px;
}

#networksTable tbody tr {
    border: 1px solid transparent;
}

#networksTable tbody tr:hover {
    background-color: transparent !important;
    border: 2px solid rgba(25, 135, 84, 0.8) !important;
    cursor: pointer;
    position: relative;
    z-index: 10;
    outline: 1px solid rgba(25, 135, 84, 0.8);
    outline-offset: -1px;
}

#networksTable tbody tr:hover td {
    background-color: transparent !important;
}
</style>
{{end}}